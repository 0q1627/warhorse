## The inventory file
resource "local_file" "Inventory" {
 content = templatefile("inventory.tmpl",
 {
{% for vm in warhorse.vm %}
{% if vm.provider == "digitalocean" %}
    {{ vm.name }}-dns = digitalocean_droplet.{{ vm.resource_name|default(warhorse.general.user_tag + '-' + warhorse.general.op_number + '-' + vm.name) }}.name,
    {{ vm.name }}-ip = digitalocean_droplet.{{ vm.resource_name|default(warhorse.general.user_tag + '-' + warhorse.general.op_number + '-' + vm.name) }}.ipv4_address,
    {{ vm.name }}-id = digitalocean_droplet.{{ vm.resource_name|default(warhorse.general.user_tag + '-' + warhorse.general.op_number + '-' + vm.name) }}.id,
{% endif %}
{% endfor %}
 }
 )
 filename = "../inventory/inventory"
}